<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Personale1</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>

<!-- 

------------------------FORMS-----------------------------------

Esistono due tipi di form in angular:
1) Template Driven Forms
2) Reactive Forms

------------------TEMPLATE DRIVEN FORM--------------------------

- È un form basic
- Facile da usare
- Basato su template

ngModel crea e gestisce un'istanza della classe FormControl, che traccia il valore e lo stato di validazione di un singolo input.

COME CREARLI
- Dentro app module devi importare FormsModule
- Dentro il componente che stai usando per creare il template del form (es. app component) devi importare l'NgForm, ed eventualmente ViewChild per intercettare i cambiamenti nell'oggetto indicato (il form) e gestirli.
- Il button per il submit possiamo scriverlo così:
  <input type="submit">
- Il tag del form dobbiamo scriverlo così:
  <form (ngSubmit)="onSubmit()">
  per indicare che il form è legato a un evento.
  In questo modo, il click sul button "submit" scatenerà l'evento "ngSubmit", che chiamerà il metodo "onSubmit()".

COME FARLI RICONOSCERE DA ANGULAR (METODO 1)
- Ciò che fà il metodo "onSubmit()" dobbiamo specificarlo noi dentro il ts del componente, es. possiamo far partire un console log.
- Per ottenere l'oggetto NgForm dall'html al ts del component:
  a) dobbiamo passare al metodo "onSubmit()" il parametro "form: NgForm", dentro il ts del component
  b) dobbiamo usare un local reference variable sul form, es. #myForm, e passarlo come parametro di "onSubmit()", dentro l'html del component
  c) dobbiamo assegnare al #myForm un valore del tipo "ngForm", dentro l'html del component
In questo modo Angular capisce che il template html è un NgForm, se facciamo un console log del form lo vediamo come un oggetto Angular composto da varie proprietà (es. "controls", "value")

COME FARLI RICONOSCERE DA ANGULAR (METODO 2)
- Dobbiamo usare un local reference variable sull'html del form, es. #myForm ="ngForm"
- Possiamo creare una variabile di "form?: NgForm" dentro la classe del componente, e decorarla con un @ViewChild()
- Passiamo #myForm come parametro del @ViewChild():
  @ViewChild('myForm') form?: NgForm;
- Verifichiamo il collegamento tramite un console.log(this.form) dentro l'OnSubmit()

COME OTTENERE I DATI PASSATI DALL'UTENTE E IL CONTROLLO SU DI ESSI
- Per ottenere i controlli (ovvero i dati passati dall'utente):
  a) dobbiamo specificare un name per tutti gli input del form, es.
        <input type="text" id="lastname" name="lastname">
  b) dobbiamo specificare un ngModel per tutti gli input del form, es.
        <input type="text" id="lastname" name="lastname" ngModel>

QUALI ALTRE PROPRIETA' DELL'OGGETTO FORM DI ANGULAR ESISTONO
È possibile vederlo facendo un console log del form, alcune importanti:
- "controls" (accede ai controlli dell'oggetto Form, es. "first name"...)
- "value" (prende valori scritti dall'utente nei campi)
- "valid" (booleano per gestire le validazioni, true di default se non ci sono validazioni)
- "invalid" (booleano per gestire le validazioni, false di default se non ci sono validazioni)
- "touched" (booleano per tenere traccia dell'interazione dell'utente con il form, se l'utente ha toccato un campo input è settato su true)
- "untouched" (il contrario di touched)
- "dirty" (booleano per tenere traccia di eventuali cambiamenti fatti nel form, false di default se non ci sono cambiamenti)
- "pristine" (è il contrario di dirty)

--------------------------VALIDAZIONI---------------------------

REQUIRED
La validazione più elementare è quella del "required", che ci permetterà di vedere tramite console log i valori assunti da "valid" e "invalid" sia dentro l'oggetto Form che dentro i singoli oggetti corrispondenti agli input nel "controls" object.
    <input type="email" id="email" name="email" placeholder="email" ngModel required>

EMAIL
Possiamo inserire una validazione "email" con la stessa sintassi di "required" per controllare la validità della e-mail:
    <input type="email" id="email" name="email" placeholder="email" ngModel required email>

    
SUBMIT DISABLED SE IL FORM NON È VALIDO
Possiamo impedire il click sul button se il form non è valido. Per farlo, usiamo "'[disabled]="!myForm.valid'":
    <input type="submit" placeholder="submit" [disabled]="!myForm.valid">

CSS DELLE CLASSI DELL'NGFORM
Quando cambia il valore delle proprietà "touched", "untouched", "valid", etc, cambia dinamicamente la classe css dell'elemento del dom corrispondente.
- Quindi se diamo un "border: 1px solid red" all' .ng-invalid, se il form non è valido, avrà un bordo rosso., se lo diamo all'input "input.ng-invalid" verrà applicato ai campi del form invece, e se diamo "input.ng-invalid.ng-touched", il bordo verrà dato solo se l'utente ha cliccato nel campo e poi ha cliccato fuori dal campo senza scrivere niente o scrivendo qualcosa di invalido
- Se vogliamo far comparire messaggi di errore nel form per l'utente, possiamo inserire per esempio un:
    <div><small>The email is required</small></div>
sotto l'input dell'email, e aggiungere un:
    #myEmail="ngModel"
all'input dell'e-mail. In questo modo avremo il controllo sul singolo input.
- con un "*ngIf="myEmail.invalid && myEmail.touched" possiamo gestire dinamicamente il contenuto dello <small> in maniera tale che venga mostrato solo se il campo è invalido e touched.

USO DEL DATA BINDING NEGLI NGFORMS
se vogliamo collegare una proprietà della classe esportata dal ts del component a un input html, dobbiamo usare es.
  [ngModel]="lastname" (dopo aver creato la proprietà "lastname" nella classe)
oppure usare two way data binding in caso di esigenze specifiche.

-------------------NGMODELGROUP/#USERGROUP----------------------
-------------------FORM.SETVALUE()----------------------
-------------------FORMCONTROL.PATCHVALUE()------------------

-------------------REACTIVE FORM--------------------------------

REACTIVE FORM
- È un form complesso che permette maggiore controllo
- La struttura del form e le regole di validazione sono definite nella classe Typescript

L'instanza di FormControl viene creata manualmente nel componente per poi essere passata alla direttiva omonima [formControl].

-->

